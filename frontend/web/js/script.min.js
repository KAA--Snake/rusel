var excludedFilterParams=["page","perPage"];$(document).ready(function(){function a(){var a=$(".wrap").outerHeight()-$(".sp_list").offset().top-116,b=$(".sp_list").closest(".js-sp_list_wrap");b.hasClass("sp_body-fullwidth")&&(a=document.body.clientHeight-$(".sp_list").offset().top-60),$(".sp_list").height(a)}if($("#top_search_form").on("submit",function(){return 4>$("#top_search_form .search_field").val().length?($(this).append("<span class=\"count_tooltip\">\u0414\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0438\u043C\u0443\u043C 4 \u0441\u0438\u043C\u0432\u043E\u043B\u0430<span class=\"corner\"></span></span>"),setTimeout(function(){$("#top_search_form").find(".count_tooltip").fadeOut(function(){$(this).remove()})},5e3),!1):void $("#top_search_form").submit()}),0<$("#by-artikuls").length){var b=$("#by-artikuls");b.on("submit",function(){var a=document.createElement("div"),b=document.createElement("div");a.classList.add("s_shadow_layer"),b.classList.add("s_popup"),b.innerHTML="<div class=\"preloader\"></div> <div class=\"text\"> \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435. <br> \u0418\u0434\u0435\u0442 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0434\u0430\u043D\u043D\u044B\u0445... </div> <a class=\"reset_link\" href=\"/search/\">\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u043F\u0440\u043E\u0446\u0435\u0441\u0441</a>",document.body.appendChild(a),document.body.appendChild(b)})}0<$(".js-sp_filter").length&&$(".js-sp_filter").on("input",function(){var a=$(".js-sp_item");if(1<=this.value.length)for(let b=0;b<a.length;b++)-1==a.eq(b).find("a").text().toLowerCase().indexOf(this.value.toLowerCase())?a.eq(b).hide():a.eq(b).show();else for(let b=0;b<a.length;b++)a.eq(b).show()}),0<$(".js-delete_item").length&&$(document).on("click",".js-delete_item",function(){$(this).closest(".list_cell").remove()}),0<$(".js-search-list-item").length&&$(".js-search-list-item").on("input",function(){var a=$(this).closest(".list_cell");4>this.value.length?!a.find(".article_err").length&&a.append("<span class=\"article_err\">\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u0434\u0430\u043D\u043D\u043E\u043C\u0443 \u0430\u0440\u0442\u0438\u043A\u043B\u0443 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u0435\u043D (min 4 \u0441\u0438\u043C\u0432\u043E\u043B\u0430)</span>"):a.find(".article_err").remove()}),0<$(".js-show-product_card--hidden").length&&$(".js-show-product_card--hidden").on("click",function(){var a=$(this).closest(".articles_item"),b=a.find(".product_card--hidden");b.each(function(){$(this).show()}),$(this).prev(".show_10").hide(),$(this).hide()}),0<$(".js-add_item-row").length&&$(".js-add_item-row").on("click",function(){$("<div class=\"list_cell\">\n<span class=\"square_icon\"></span>\n<input class=\"item_input js-search-list-item\" name=\"articles[]\" type=\"text\" value=\"\">\n<span class=\"delete_item js-delete_item\"></span>\n</div>").insertBefore(this),$(".js-search-list-item").on("input",function(){var a=$(this).closest(".list_cell");4>this.value.length?!a.find(".article_err").length&&a.append("<span class=\"article_err\">\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u0434\u0430\u043D\u043D\u043E\u043C\u0443 \u0430\u0440\u0442\u0438\u043A\u043B\u0443 \u043D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u0435\u043D (min 4 \u0441\u0438\u043C\u0432\u043E\u043B\u0430)</span>"):a.find(".article_err").remove()})}),0<$(".article_expand-btn").length&&$(".article_expand-btn").on("click",function(){var a=$(this).closest(".articles_item"),b=a.find(".product_card--hidden"),c=a.prevAll(".articles_item").eq(0),d=a.nextAll(".articles_item").eq(0),e=a.find(".articles_item_head"),f=a.find(".articles_item_body"),g=a.find(".articles_item_foot"),h=a.next(".fake_divider"),i=a.prev(".fake_divider"),j=e.find(".head-article_collapse-btn .js-word"),k=g.find(".foot-article_collapse-btn .js-word");a.hasClass("collapsed")?(a.removeClass("collapsed").addClass("expanded"),j.text("\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C"),k.text("\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C"),e.find(".arrow").addClass("exp"),i.slideDown(),h.slideDown(),f.slideDown(),g.slideDown()):a.hasClass("expanded")&&(a.removeClass("expanded").addClass("collapsed"),j.text("\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"),k.text("\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"),e.find(".arrow").removeClass("exp"),c.hasClass("collapsed")&&i.slideUp(),d.hasClass("collapsed")&&h.slideUp(),f.slideUp(),g.slideUp(),b.each(function(){$(this).hide()}),a.find(".show_10").show(),a.find(".js-show-product_card--hidden").show())}),$(".slider").slick({infinite:!0,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:6e3,arrows:!1}),0<$(".producers_block").length&&$(".producers_block").each(function(){var a=$(this).find(".producers_item");if(15<a.length){$(this).append("<span class=\"expand\">\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0432\u0435\u0441\u044C \u0441\u043F\u0438\u0441\u043E\u043A</span>");for(var b=15;b<a.length;b++)a.eq(b).hide().addClass("hidden");var c=$(this).find(".expand");c.on("click",function(){for(var b=15;b<a.length;b++)a.eq(b).show().removeClass("hidden"),$(this).hide()})}}),$(".js-recall_popup_trigger").click(function(){$(".popup_container.recall").fadeIn()}),$(".js-recall_popup_close").click(function(){$(".popup_container.recall").fadeOut()}),a(),$(".js-scroll-pane").jScrollPane({autoReinitialise:!0,animateScroll:!0}),$(".ct_dir").on("click",function(b){if(b.stopImmediatePropagation(),b.target==b.currentTarget||"UL"==b.target.nextSibling.nodeName){b.preventDefault();var c=this;$(this).hasClass("child_collapsed")?($(this).find(".catalog_tree").first().slideDown(function(){a(),$(c).hasClass("ct_last")&&$(c).find(".corner").first().height($(c).height()).addClass("long")}).removeClass("collapsed").addClass("expanded"),$(this).removeClass("child_collapsed").addClass("child_expanded")):$(this).hasClass("child_expanded")&&($(this).find(".catalog_tree").first().slideUp(function(){a()}).removeClass("expanded").addClass("collapsed"),$(c).hasClass("ct_last")&&$(c).find(".corner.long").first().height(10).removeClass("long"),$(this).removeClass("child_expanded").addClass("child_collapsed"))}}),$(".sp_header").on("click",function(){$(this).hasClass("sp_expanded")?$(this).addClass("sp_collapsed").removeClass("sp_expanded"):$(this).hasClass("sp_collapsed")&&$(this).addClass("sp_expanded").removeClass("sp_collapsed")}),$(".product_tab").tabs({active:0}),$(".js-expand-tabs").click(function(b){b.preventDefault();var c=$(this).closest(".product_card");c.hasClass("js-tab_collapsed")?(c.find(".product_card_more").first().slideDown(function(){a()}).removeClass("collapsed"),c.addClass("js-tab_expanded").removeClass("js-tab_collapsed"),$(this).find("a").text("\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C  \u2191")):c.hasClass("js-tab_expanded")&&(c.find(".product_card_more").first().slideUp(function(){a()}).addClass("collapsed"),c.addClass("js-tab_collapsed").removeClass("js-tab_expanded"),$(this).find("a").text("\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435  \u2193"))}),$(".hide_tabs_btn").click(function(b){b.preventDefault();var c=$(this).closest(".product_card");c.hasClass("js-tab_collapsed")?(c.find(".product_card_more").first().slideDown(function(){a()}).removeClass("collapsed"),c.addClass("js-tab_expanded").removeClass("js-tab_collapsed"),c.find(".more a").first().text("\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C  \u2191")):c.hasClass("js-tab_expanded")&&(c.find(".product_card_more").first().slideUp(function(){a()}).addClass("collapsed"),c.addClass("js-tab_collapsed").removeClass("js-tab_expanded"),c.find(".more a").first().text("\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435  \u2193"))}),$(".js-show-more-stores_btn").click(function(){$(".js-hidden-store").show().removeClass("js-hidden-store"),$(".js-show-more-stores_btn").closest(".js-show-more-stores_block").remove()}),$(".js-selected_count_vars").click(function(){$(this).next(".count_vars").hasClass("active")?$(this).next(".count_vars").fadeOut().removeClass("active"):$(this).next(".count_vars").fadeIn().addClass("active")}),$(".js-selected_show_in_stock_vars").click(function(){$(this).next(".show_in_stock_vars").hasClass("active")?$(this).next(".show_in_stock_vars").fadeOut().removeClass("active"):$(this).next(".show_in_stock_vars").fadeIn().addClass("active")}),$(".tree_header").click(function(b){var c,d=$(this).closest("h2").next(".producers_block");c=d.length?d.next(".tree_list"):$(this).closest("h2").next(".tree_list"),$(this).hasClass("inactive")&&c.length?(b.preventDefault(),c.slideDown(function(){a()}).removeClass("hidden"),d.slideDown().removeClass("hidden"),$(this).removeClass("inactive").addClass("active"),$(this).find(".tree_header_icon").removeClass("inactive").addClass("active")):$(this).hasClass("active")&&c.length&&(b.preventDefault(),c.slideUp(function(){a()}),d.slideUp(),$(this).removeClass("active").addClass("inactive"),$(this).find(".tree_header_icon").removeClass("active").addClass("inactive"))}),$(".js-show-filter_group").click(function(){$(".filter-group__params-box.expanded").slideUp().addClass("collapsed").removeClass("expanded"),$(".js-show-filter_group").show(),$(this).next(".filter-group__params-box").slideDown().removeClass("collapsed").addClass("expanded"),$(this).hide()}),$(".js-reset-filter-group").click(function(){var a=$(this).closest(".filter-group__params-box");a.slideUp().addClass("collapsed").removeClass("expanded"),a.prev(".js-show-filter_group").show()}),$(".js-filter_dropdown").click(function(){$(this).hasClass("inactive")?($(".filter_selector_wrap").slideDown(function(){a()}).removeClass("collapsed").addClass("expanded"),$(".js-filter_dropdown").removeClass("inactive").addClass("active"),$(".js-empty-filter").hide()):$(this).hasClass("active")&&($(".filter_selector_wrap").slideUp(function(){a()}).removeClass("expanded").addClass("collapsed"),$(".js-filter_dropdown").removeClass("active").addClass("inactive"),$(".js-empty-filter").show())}),$(".js-filter-post-send").click(function(a){var b=$("#filter-form"),c=$(".js-filter-param");if(b.length){var d=[];c.each(function(){$(this).val()&&d.push($(this).val())}),0<d.length&&(a.preventDefault(),$("#filter-form").attr("action",a.target.pathname+a.target.search),$("#filter-form").submit())}}),$(".js-filter-show_in_stock").click(function(a){a.preventDefault();var b=$(this).data("type"),c=document.location.search.slice(1).split("&")||[];if($("#filter-form").length){"all"==b?($("#on_stores").val(""),$("#marketing").val("")):"on_stores"==b?($("#on_stores").val("y"),$("#marketing").val("")):"marketing"==b&&($("#on_stores").val(""),$("#marketing").val("y"));for(let a=0;a<c.length;a++)-1!=c[a].indexOf("page=")&&(c[a]="page=1"),""==c[a]&&c.splice(a,1);var d="?"+c.join("&");$("#filter-form").attr("action",d),$("#filter-form").submit()}else{if("all"==b)for(let a=0;a<c.length;a++)-1!=c[a].indexOf("page=")&&(c[a]="page=1"),("on_stores=y"==c[a]||"marketing=y"==c[a])&&c.splice(a,1),""==c[a]&&c.splice(a,1);else if("on_stores"==b){for(let a=0;a<c.length;a++)-1!=c[a].indexOf("page=")&&(c[a]="page=1"),"marketing=y"==c[a]&&c.splice(a,1),""==c[a]&&c.splice(a,1);c.includes("on_stores=y")||c.push("on_stores=y")}else if("marketing"==b){for(let a=0;a<c.length;a++)-1!=c[a].indexOf("page=")&&(c[a]="page=1"),"on_stores=y"==c[a]&&c.splice(a,1),""==c[a]&&c.splice(a,1);c.includes("marketing=y")||c.push("marketing=y")}document.location.search="?"+c.join("&")}}),$(".js-filter-param-item").click(function(){var a=$(".filter_params_applied"),b=$("#filter-form"),c=$(this).closest(".filter-group").find(".js-filter-param-name").data("param"),d=$(this);if(!$(this).hasClass("selected"))$(this).addClass("selected"),b.find("input[name=\""+c+"\"]").val(b.find("input[name=\""+c+"\"]").val()+(""==b.find("input[name=\""+c+"\"]").val()?"":"|")+d.data("tag"));else{$(this).removeClass("selected");for(var e=b.find("input[name=\""+c+"\"]").val().split("|"),f=[],g=0;g<e.length;g++)e[g]!==d.data("tag")+""&&f.push(e[g]);b.find("input[name=\""+c+"\"]").val(f.join("|"))}}),$(".js-filter-param-item-more").click(function(){var a=$(this).closest(".tag_list"),b=a.find(".js-filter-param-item.hidden");b.each(function(a,b){b.classList.remove("hidden")}),$(this).hide()}),$(".js-submit-filter").click(function(a){a.preventDefault();var b=$("#filter-form"),c=$(this).data("param"),d=$("#filter_applied").attr("data")||"",e=b.find(".js-filter-param");if(e.each(function(){$(this).attr("name")!=c&&$(this).val("")}),d.length&&"[]"!==d){var f=JSON.parse(d);for(var g in f){f[g]=f[g].split("|");for(var h=0;h<f[g].length;h++)$(".filter-group").each(function(){var a=$(this).find(".js-filter-param-name"),b=$(this).find(".js-applied_filter_group"),c=$(this).find(".js-show-filter_group"),d=b.find(".js-applied_filter_params_list"),e=$(this).find(".js-show-filter_group"),h=$(this).find(".js-cancel-filter-group");a.data("param")==g&&(b.show(),e.hide(),$("#filter-form").find("input[name=\""+g+"\"]").val(1===f[g].length?f[g][0]:f[g].join("|"))),h.click(function(){$("#filter-form").find("input[name=\""+g+"\"]").val(""),$("#filter-form").submit()})})}}b.submit()});var c=$("#filter_applied").attr("data")||"";if(c.length&&"[]"!==c){var d=JSON.parse(c);for(var e in d){d[e]=d[e].split("|");for(var f=0;f<d[e].length;f++)$(".filter-group").each(function(){var a=$(this).find(".js-filter-param-name"),b=$(this).find(".js-applied_filter_group"),c=$(this).find(".js-show-filter_group"),g=b.find(".js-applied_filter_params_list"),h=$(this).find(".js-show-filter_group"),i=$(this).find(".js-cancel-filter-group");a.data("param")==e&&(f<d[e].length-1?g.append("<span>"+d[e][f]+"; </span>"):(g.append("<span>"+d[e][f]+"</span>"),c.remove()),b.show(),h.hide(),$("#filter-form").find("input[name=\""+e+"\"]").val(1===d[e].length?d[e][0]:d[e].join("|"))),i.click(function(){$("#filter-form").find("input[name=\""+i.data("param")+"\"]").val(""),$("#filter-form").submit()})})}$(".filter_selector_wrap").slideDown(function(){a()}).removeClass("collapsed").addClass("expanded"),$(".js-filter_dropdown").removeClass("inactive").addClass("active"),$(".js-empty-filter").hide()}$(".apply_filter_btn").click(function(a){a.preventDefault();for(var b,c=document.forms.productFilterForm,d=new FormData(c),e=decodeURIComponent(window.location.search.substring(1)),f=e.split("&"),g=[],h=0;h<f.length;h++)b=f[h].slice(0,f[h].indexOf("=")),-1!==excludedFilterParams.indexOf(b)&&(g.push(f[h]),"page"==b?d.set(b,1):d.set(b,f[h].slice(f[h].indexOf("=")+1)));c.submit()}),$(".filter_reset_btn").click(function(){window.location=window.location.pathname}),$(".upload_btn").click(function(a){a.preventDefault(),$(".searchlist_file").trigger("click")}),$("input[type='file'].searchlist_file").change(function(){$(".file_name").text(this.value.replace(/C:\\fakepath\\/i,"")),$(".js-search-by-list-form").submit()})});function buildQueryFilter(){var a=decodeURIComponent(window.location.search.substring(1)),b=a.split("&"),c={};Object.defineProperty(c,"length",{enumerable:!1,writable:!0}),c.length=0;for(var d,e=0;e<b.length;e++)d=b[e].split("="),-1===excludedFilterParams.indexOf(d[0])&&(d[1]=d[1].split("|"),""!==d[1][0]&&(c[d[0]]=d[1],c.length++));return c}